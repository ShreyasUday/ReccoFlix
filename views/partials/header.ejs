<div class="nav">
    <div class="nav-name">
        <p>ReccoFlix</p>
    </div>
    <div class="nav-menu">
        <ul>
            <li>
                <a href="/">
                    Home
                </a>
            </li>
            <li>
                <a href="/category">
                    Browse
                </a>
            </li>
            <li>
                <a href="/search">
                    Search
                </a>
            </li>
            <li>
                <% if (typeof user !=='undefined' && user) { %>
                    <!-- Logged In: Show User Initials -->
                    <a href="/profile" class="profile-link" title="My Profile">
                        <div class="user-icon">
                            <%= user.name ? user.name.charAt(0).toUpperCase() : 'U' %>
                        </div>
                    </a>
                    <% } else { %>
                        <!-- Logged Out: Show Guest Icon -->
                        <a href="/login" class="profile-link" title="Sign In">
                            <div class="user-icon guest-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                    width="20" height="20">
                                    <path
                                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                                </svg>
                            </div>
                        </a>
                        <% } %>
            </li>
        </ul>
        <span class="menu-toggle-btn" id="menuToggle">&#9776;</span>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const toggleBtn = document.getElementById('menuToggle');
        const navMenu = document.querySelector('.nav-menu ul');

        if (toggleBtn && navMenu) {
            toggleBtn.addEventListener('click', () => {
                navMenu.classList.toggle('nav-open');
            });
        }
    });
</script>